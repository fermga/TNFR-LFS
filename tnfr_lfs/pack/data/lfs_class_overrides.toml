# LFS class-specific adjustments that can override TNFR profiles.
# Each section defines the "targets", "policy" and/or "recommender" blocks that
# replace those declared in the base profile.

["STD".overrides]

  [ "STD".overrides.targets.balance ]
  delta_nfr = 0.28
  nu_f = 0.26
  yaw_rate_deg_s = 0.55

  [ "STD".overrides.targets.stability ]
  # Wider windows: lightweight road cars (~125 bhp/ton)
  slip_lat_window  = [-0.36,  0.36]
  slip_long_window = [-0.28,  0.28]

  [ "STD".overrides.policy.throttle ]
  aggressiveness = 0.50
  lift_margin    = 0.08

  [ "STD".overrides.recommender.steering ]
  # Typical 900° steering block for this family
  lock_deg = 900
  kp = 1.20
  ki = 0.05
  kd = 0.10



["TBO".overrides]

  [ "TBO".overrides.targets.balance ]
  delta_nfr = 0.30
  nu_f = 0.27
  yaw_rate_deg_s = 0.60

  [ "TBO".overrides.targets.stability ]
  # A little more lateral tolerance; longitudinal margin for turbo spool
  slip_lat_window  = [-0.40,  0.40]
  slip_long_window = [-0.32,  0.32]

  [ "TBO".overrides.policy.throttle ]
  aggressiveness = 0.58
  lift_margin    = 0.12

  [ "TBO".overrides.recommender.steering ]
  lock_deg = 900
  kp = 1.30
  ki = 0.05
  kd = 0.11



["LRF".overrides]

  [ "LRF".overrides.targets.balance ]
  delta_nfr = 0.31
  nu_f = 0.28
  yaw_rate_deg_s = 0.62

  [ "LRF".overrides.targets.stability ]
  # Potent, lightweight RWD (250–310 bhp/ton): wide lateral window, controlled longitudinal band
  slip_lat_window  = [-0.42,  0.42]
  slip_long_window = [-0.30,  0.30]

  [ "LRF".overrides.policy.throttle ]
  aggressiveness = 0.55
  lift_margin    = 0.09

  [ "LRF".overrides.recommender.steering ]
  lock_deg = 900
  kp = 1.35
  ki = 0.05
  kd = 0.12



["GTR".overrides]

  [ "GTR".overrides.targets.balance ]
  delta_nfr = 0.33
  nu_f = 0.29
  yaw_rate_deg_s = 0.65

  [ "GTR".overrides.targets.stability ]
  # High downforce (≈450 bhp/ton): tighter windows, demands precision
  slip_lat_window  = [-0.28,  0.28]
  slip_long_window = [-0.24,  0.24]

  [ "GTR".overrides.policy.throttle ]
  aggressiveness = 0.62
  lift_margin    = 0.10

  [ "GTR".overrides.recommender.steering ]
  # In LFS these cars use 540° of steering
  lock_deg = 540
  kp = 1.45
  ki = 0.06
  kd = 0.12



["FWD GTR".overrides]

  [ "FWD GTR".overrides.targets.balance ]
  delta_nfr = 0.30
  nu_f = 0.27
  yaw_rate_deg_s = 0.58

  [ "FWD GTR".overrides.targets.stability ]
  # High-power FWD: manage front axle temperature and traction
  slip_lat_window  = [-0.30,  0.30]
  slip_long_window = [-0.26,  0.26]

  [ "FWD GTR".overrides.policy.throttle ]
  aggressiveness = 0.57
  lift_margin    = 0.11

  [ "FWD GTR".overrides.recommender.steering ]
  lock_deg = 540
  kp = 1.40
  ki = 0.05
  kd = 0.12



["Single-seaters".overrides]

  [ "Single-seaters".overrides.targets.balance ]
  delta_nfr = 0.34
  nu_f = 0.30
  yaw_rate_deg_s = 0.80

  [ "Single-seaters".overrides.targets.stability ]
  # Single-seaters: lots of response and support; narrow, clean windows
  slip_lat_window  = [-0.26,  0.26]
  slip_long_window = [-0.22,  0.22]

  [ "Single-seaters".overrides.policy.throttle ]
  aggressiveness = 0.66
  lift_margin    = 0.07

  [ "Single-seaters".overrides.recommender.steering ]
  # Class default is 450°; refine per car afterwards (BF1=400, MRT=270)
  lock_deg = 450
  kp = 1.60
  ki = 0.06
  kd = 0.13
